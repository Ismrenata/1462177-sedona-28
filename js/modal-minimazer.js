var formMain=document.querySelector(".form_index_search form"),formOpenButton=formMain.querySelector(".open_form"),formData=formMain.querySelector(".container_fieldset"),arrivalDate=formData.querySelector("[name = arrival_date]"),departureDate=formData.querySelector("[name = date_of_departure]"),peopleAmount=formData.querySelectorAll(".input_number"),map=document.querySelector(".map a"),modalMap=document.querySelector(".modal_map"),closeModalMap=modalMap.querySelector(".modal_close"),isStorageSupport=!0,storageAdults="",storageChildren="";try{storageAdults=localStorage.getItem("adults"),storageChildren=localStorage.getItem("children")}catch(e){isStorageSupport=!1}formOpenButton.addEventListener("click",function(e){e.preventDefault(),formData.classList.toggle("visually-hidden"),formData.classList.contains("visually-hidden")?formData.classList.remove("modal_show"):(formData.classList.add("modal_show"),storageAdults&&(peopleAmount[0].value=storageAdults),storageChildren&&(peopleAmount[1].value=storageChildren),arrivalDate.focus())}),formMain.addEventListener("submit",function(e){arrivalDate.value&&departureDate.value&&peopleAmount[0].value&&peopleAmount[1].value?isStorageSupport&&(localStorage.setItem("adults",peopleAmount[0].value),localStorage.setItem("children",peopleAmount[1].value)):e.preventDefault(),e.preventDefault()}),map.addEventListener("click",function(e){e.preventDefault(),modalMap.classList.remove("visually-hidden"),formData.classList.contains("visually-hidden")||formData.classList.add("visually-hidden")}),closeModalMap.addEventListener("click",function(e){modalMap.classList.add("visually-hidden")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(formData.classList.contains("visually-hidden")||(e.preventDefault(),formData.classList.add("visually-hidden"),formData.classList.remove("modal_show")),modalMap.classList.contains("visually-hidden")||(e.preventDefault(),modalMap.classList.add("visually-hidden")))});
